import{a as m}from"./chunk-PJJCQ6E5.js";import"./chunk-NYJ3NA3T.js";import{a as K,h as Y,i as Z,j as ee,k as ae,l as le,m as he,n as ce,o as pe,p as me,q as ue,r as de}from"./chunk-UJRSOKAA.js";import{$a as I,Ca as V,Ea as P,Ec as te,F as x,Fa as k,Hc as ie,Ic as se,Ja as N,Ka as $,Kb as J,Kc as re,L as O,La as B,Lc as oe,M as S,Mc as ne,Pa as D,T as f,Ta as c,Ua as Q,Va as G,X as a,Ya as w,Za as C,_a as U,aa as b,da as n,ea as v,ga as H,gb as g,h as T,ha as M,hc as X,ia as _,ja as y,la as d,mb as q,nb as W,pb as z,va as l,wa as r,xa as o,y as F,ya as h}from"./chunk-G7NDYXVT.js";import"./chunk-EQDQRRRY.js";var Re=(()=>{class t{set hasAnyRole(e){this.roles=e,this.updateView()}constructor(e,i,s,p){this.element=e,this.templateRef=i,this.viewContainer=s,this.subject=p,this.roles=null,this.embeddedViewRef=null}ngOnInit(){this.sub=this.subject.roles$.subscribe(()=>this.updateView())}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateView(){this.subject.hasAnyRole(this.roles)?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.templateRef)):(this.viewContainer.clear(),this.embeddedViewRef=null)}static{this.\u0275fac=function(i){return new(i||t)(n(f),n(b),n(v),n(m))}}static{this.\u0275dir=_({type:t,selectors:[["","hasAnyRole",""]],inputs:{hasAnyRole:"hasAnyRole"}})}}return t})();var fe=(()=>{class t{set hasRole(e){this.role=e,this.updateView()}constructor(e,i,s,p){this.element=e,this.templateRef=i,this.viewContainer=s,this.subject=p,this.role=null,this.embeddedViewRef=null}ngOnInit(){this.sub=this.subject.roles$.subscribe(()=>this.updateView())}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateView(){this.subject.hasRole(this.role)?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.templateRef)):(this.viewContainer.clear(),this.embeddedViewRef=null)}static{this.\u0275fac=function(i){return new(i||t)(n(f),n(b),n(v),n(m))}}static{this.\u0275dir=_({type:t,selectors:[["","hasRole",""]],inputs:{hasRole:"hasRole"}})}}return t})();var be=(()=>{class t{constructor(e,i){this.ref=e,this.subject=i,this.hasRole=null,this.sub=null}transform(e,i){return e=i||e,this.clear(),this.sub=this.subject.hasRoleAsync(e).subscribe(s=>{this.hasRole!==s&&(this.hasRole=s,this.ref.markForCheck())}),this.hasRole}ngOnDestroy(){this.clear()}clear(){this.hasRole=null,this.sub&&(this.sub.unsubscribe(),this.sub=null)}static{this.\u0275fac=function(i){return new(i||t)(n(g,16),n(m,16))}}static{this.\u0275pipe=y({name:"hasRole",type:t,pure:!1})}}return t})();var ve=(()=>{class t{constructor(e,i){this.ref=e,this.subject=i,this.hasAnyRole=null,this.sub=null}transform(e,i){return e=i||e,this.clear(),this.sub=this.subject.hasAnyRoleAsync(e).subscribe(s=>{this.hasAnyRole!==s&&(this.hasAnyRole=s,this.ref.markForCheck())}),this.hasAnyRole}ngOnDestroy(){this.clear()}clear(){this.hasAnyRole=null,this.sub&&(this.sub.unsubscribe(),this.sub=null)}static{this.\u0275fac=function(i){return new(i||t)(n(g,16),n(m,16))}}static{this.\u0275pipe=y({name:"hasAnyRole",type:t,pure:!1})}}return t})();var _e=(()=>{class t{constructor(e,i){this.ref=e,this.subject=i,this.hasRoles=null,this.sub=null}transform(e,i){return e=i||e,this.clear(),this.sub=this.subject.hasRolesAsync(e).subscribe(s=>{this.hasRoles!==s&&(this.hasRoles=s,this.ref.markForCheck())}),this.hasRoles}ngOnDestroy(){this.clear()}clear(){this.hasRoles=null,this.sub&&(this.sub.unsubscribe(),this.sub=null)}static{this.\u0275fac=function(i){return new(i||t)(n(g,16),n(m,16))}}static{this.\u0275pipe=y({name:"hasRoles",type:t,pure:!1})}}return t})();var ye=(()=>{class t{set hasRoles(e){this.roles=e,this.updateView()}constructor(e,i,s,p){this.element=e,this.templateRef=i,this.viewContainer=s,this.subject=p,this.roles=null,this.embeddedViewRef=null}ngOnInit(){this.sub=this.subject.roles$.subscribe(()=>this.updateView())}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateView(){this.subject.hasRoles(this.roles)?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.templateRef)):(this.viewContainer.clear(),this.embeddedViewRef=null)}static{this.\u0275fac=function(i){return new(i||t)(n(f),n(b),n(v),n(m))}}static{this.\u0275dir=_({type:t,selectors:[["","hasRoles",""]],inputs:{hasRoles:"hasRoles"}})}}return t})();var ge=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=x({})}}return t})();var Ie=["rolesInput"],L=()=>["ROLE_1","ROLE_2"];function Le(t,u){if(t&1){let e=V();r(0,"mat-chip",15),P("removed",function(){let s=O(e).$implicit,p=k();return S(p.remove(s))}),c(1),r(2,"mat-icon",16),c(3,"cancel"),o()()}if(t&2){let e=u.$implicit;a(),G(" ",e," ")}}function je(t,u){if(t&1&&(r(0,"mat-option",17),c(1),o()),t&2){let e=u.$implicit;l("value",e),a(),Q(e)}}function Ae(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1"),o()())}function Ve(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1 or ROLE_2"),o()())}function De(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1 and ROLE_2"),o()())}function Te(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1"),o()())}function Fe(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1 or ROLE_2"),o()())}function xe(t,u){t&1&&(r(0,"mat-card")(1,"span"),c(2,"This is visible because user has ROLE_1 and ROLE_2"),o()())}var He=`<p *hasRole="'ROLE_1'">This should see users with ROLE_1</p>`,Me=`<p *hasAnyRole="['ROLE_1','ROLE_2']">This should see users with ROLE_1 or ROLE_2</p>`,ke=`<p *hasRoles="['ROLE_1','ROLE_2']">This should see users with ROLE_1 and ROLE_2</p>`,Ne=`<p *ngIf="'ROLE_1' | hasRole">This should see users with ROLE_1</p>`,$e=`<p *ngIf="['ROLE_1','ROLE_2'] | hasAnyRole">This should see users with ROLE_1 or ROLE_2</p>`,Be=`<p *ngIf="['ROLE_1','ROLE_2'] | hasRoles">This should see users with ROLE_1 and ROLE_2</p>`,Qe=`<p *ngIf="'user' | hasRole:'ROLE_1'">This should see users with ROLE_1</p>`,Ge=`<p *ngIf="'user' | hasAnyRole:['ROLE_1','ROLE_2']">This should see users with ROLE_1 or ROLE_2</p>`,Ue=`<p *ngIf="'user' | hasRoles:['ROLE_1','ROLE_2']">This should see users with ROLE_1 and ROLE_2</p>`,vt=(()=>{class t{constructor(e){this.subjectRolesProvider=e,this.rolesCtrl=new re,this.roles=[],this.allRoles=["ROLE_1","ROLE_2"],this.hasRoleStructuralDirective=He,this.hasAnyRoleStructuralDirective=Me,this.hasRolesStructuralDirective=ke,this.hasRolePipe=Ne,this.hasAnyRolePipe=$e,this.hasRolesPipe=Be,this.hasRolePipePoetry=Qe,this.hasAnyRolePipePoetry=Ge,this.hasRolesPipePoetry=Ue,this.filteredRoles=this.rolesCtrl.valueChanges.pipe(F(null),T(i=>i?this.filter(i):this.allRoles.slice()))}add(e){let i=e.input,s=e.value;(s||"").trim()&&(this.roles.push(s.trim()),this.update(this.roles.slice())),i&&(i.value=""),this.rolesCtrl.setValue(null)}remove(e){let i=this.roles.indexOf(e);i>=0&&(this.roles.splice(i,1),this.update(this.roles.slice()))}selected(e){this.roles.push(e.option.viewValue),this.update(this.roles.slice()),this.rolesInput.nativeElement.value="",this.rolesCtrl.setValue(null)}filter(e){let i=e.toLowerCase();return this.allRoles.filter(s=>s.toLowerCase().indexOf(i)===0)}update(e){this.subjectRolesProvider.update(e)}static{this.\u0275fac=function(i){return new(i||t)(n(m))}}static{this.\u0275cmp=H({type:t,selectors:[["app-roles"]],viewQuery:function(i,s){if(i&1&&N(Ie,7),i&2){let p;$(p=B())&&(s.rolesInput=p.first)}},decls:65,vars:46,consts:[["chipList",""],["rolesInput",""],["auto","matAutocomplete"],["label","Overview"],[3,"highlight","language"],["label","Demo"],[2,"width","100%"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","User roles",3,"matChipInputTokenEnd","formControl","matAutocomplete","matChipInputFor"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"hasRole"],[4,"hasAnyRole"],[4,"hasRoles"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(i,s){if(i&1){let p=V();r(0,"mat-tab-group")(1,"mat-tab",3),h(2,"br")(3,"br"),r(4,"h2"),c(5,"Installation"),o(),r(6,"pre"),h(7,"code",4),o(),h(8,"br"),r(9,"h2"),c(10,"Usage"),o(),r(11,"h4"),c(12,"Structural directives"),o(),r(13,"pre"),h(14,"code",4),o(),r(15,"pre"),h(16,"code",4),o(),r(17,"pre"),h(18,"code",4),o(),h(19,"br"),r(20,"h4"),c(21,"Pipes"),o(),r(22,"pre"),h(23,"code",4),o(),r(24,"pre"),h(25,"code",4),o(),r(26,"pre"),h(27,"code",4),o(),h(28,"br"),r(29,"h4"),c(30,"Pipes with poetry"),o(),r(31,"pre"),h(32,"code",4),o(),r(33,"pre"),h(34,"code",4),o(),r(35,"pre"),h(36,"code",4),o()(),r(37,"mat-tab",5),h(38,"br")(39,"br"),r(40,"form")(41,"mat-form-field",6)(42,"mat-chip-grid",null,0),d(44,Le,4,1,"mat-chip",7),r(45,"input",8,1),P("matChipInputTokenEnd",function(A){return O(p),S(s.add(A))}),o()(),r(47,"mat-autocomplete",9,2),P("optionSelected",function(A){return O(p),S(s.selected(A))}),d(49,je,2,2,"mat-option",10),C(50,"async"),o()()(),h(51,"br")(52,"br"),r(53,"mat-card")(54,"span"),c(55,"This is card is always visible to all users. Add some role to see more cards"),o()(),d(56,Ae,3,0,"mat-card",11),C(57,"hasRole"),d(58,Ve,3,0,"mat-card",11),C(59,"hasAnyRole"),d(60,De,3,0,"mat-card",11),C(61,"hasRoles"),d(62,Te,3,0,"mat-card",12)(63,Fe,3,0,"mat-card",13)(64,xe,3,0,"mat-card",14),o()()}if(i&2){let p=D(43),j=D(48);a(7),l("highlight","npm install --save @ngx-security/core @ngx-security/roles")("language","bash"),a(7),l("highlight",s.hasRoleStructuralDirective)("language","html"),a(2),l("highlight",s.hasAnyRoleStructuralDirective)("language","html"),a(2),l("highlight",s.hasRolesStructuralDirective)("language","html"),a(5),l("highlight",s.hasRolePipe)("language","html"),a(2),l("highlight",s.hasAnyRolePipe)("language","html"),a(2),l("highlight",s.hasRolesPipe)("language","html"),a(5),l("highlight",s.hasRolePipePoetry)("language","html"),a(2),l("highlight",s.hasAnyRolePipePoetry)("language","html"),a(2),l("highlight",s.hasRolesPipePoetry)("language","html"),a(8),l("ngForOf",s.roles),a(),l("formControl",s.rolesCtrl)("matAutocomplete",j)("matChipInputFor",p),a(4),l("ngForOf",U(50,31,s.filteredRoles)),a(7),l("ngIf",I(57,33,"user","ROLE_1")),a(2),l("ngIf",I(59,36,"user",w(42,L))),a(2),l("ngIf",I(61,39,"user",w(43,L))),a(2),l("hasRole","ROLE_1"),a(),l("hasAnyRole",w(44,L)),a(),l("hasRoles",w(45,L))}},dependencies:[de,q,W,oe,te,ie,se,ne,Y,Z,K,X,ee,le,he,ce,ae,me,pe,ue,J,ge,Re,fe,ye,z,be,ve,_e],encapsulation:2,changeDetection:0})}}return t})();export{vt as RolesComponent};
