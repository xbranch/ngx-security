import{a as l}from"./chunk-UYXBI5CC.js";import"./chunk-4LMQNLOX.js";import{a as j,h as D,i as R,r as M}from"./chunk-34HBK44Y.js";import{$ as f,Bb as E,F as h,Na as m,S as u,Ta as x,Va as C,Xa as w,_ as o,ca as p,da as P,eb as I,ga as g,ha as b,ia as v,ja as y,la as S,oa as d,wa as t,xa as i,ya as n}from"./chunk-4AUW2PAQ.js";import"./chunk-EQDQRRRY.js";var T=(()=>{class e{set isPermitted(r){this.permission=r,this.updateView()}constructor(r,s,a,N){this.element=r,this.templateRef=s,this.viewContainer=a,this.subject=N,this.permission=null,this.embeddedViewRef=null}ngOnInit(){this.sub=this.subject.permissions$.subscribe(()=>this.updateView())}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateView(){this.subject.isPermitted(this.permission)?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.templateRef)):(this.viewContainer.clear(),this.embeddedViewRef=null)}static{this.\u0275fac=function(s){return new(s||e)(p(u),p(f),p(P),p(l))}}static{this.\u0275dir=v({type:e,selectors:[["","isPermitted",""]],inputs:{isPermitted:"isPermitted"}})}}return e})();var F=(()=>{class e{constructor(r,s){this.ref=r,this.subject=s,this.isPermitted=null,this.sub=null}transform(r,s){return r=s||r,this.clear(),this.sub=this.subject.isPermittedAsync(r).subscribe(a=>{this.isPermitted!==a&&(this.isPermitted=a,this.ref.markForCheck())}),this.isPermitted}ngOnDestroy(){this.clear()}clear(){this.isPermitted=null,this.sub&&(this.sub.unsubscribe(),this.sub=null)}static{this.\u0275fac=function(s){return new(s||e)(p(w,16),p(l,16))}}static{this.\u0275pipe=y({name:"isPermitted",type:e,pure:!1})}}return e})();var O=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=h({})}}return e})();function A(e,_){e&1&&(t(0,"mat-card")(1,"span"),m(2,"Permission is 'printer:xpc4000:configure'"),i()())}function B(e,_){e&1&&(t(0,"mat-card")(1,"span"),m(2,"Permission is 'nas:timeCapsule:write'"),i()())}var G=`<p *isPermitted="'printer:xpc4000:configure'"></p>`,H=`<p *ngIf="'nas:timeCapsule:write' | isPermitted"></p>`,U=`<p *ngIf="'user' | isPermitted:'nas:timeCapsule:write'"></p>`,te=(()=>{class e{constructor(r){this.subjectPermissionsProvider=r,this.isPermittedDirective=G,this.isPermittedPipe=H,this.isPermittedPipePoetry=U,this.permissions=`
[
  'printer:xpc5000:print',
  'printer:xpc4000:*',
  'nas:timeCapsule,fritzbox:read'
]
  `,this.firstCard=`
<mat-card *isPermitted="'printer:xpc4000:configure'">
  <span>Permission is 'printer:xpc4000:configure'</span>
</mat-card>
`,this.secondCard=`
<mat-card *ngIf="'user' | isPermitted:'nas:timeCapsule:write'">
  <span>Permission is 'nas:timeCapsule:write'</span>
</mat-card>
`}ngOnInit(){this.update(["printer:xpc5000:print","printer:xpc4000:*","nas:timeCapsule,fritzbox:read"])}update(r){this.subjectPermissionsProvider.update(r),this.subjectPermissionsProvider.apply()}static{this.\u0275fac=function(s){return new(s||e)(p(l))}}static{this.\u0275cmp=g({type:e,selectors:[["app-permissions"]],decls:49,vars:19,consts:[["label","Overview"],[3,"highlight","language"],["label","Examples"],[4,"isPermitted"],[4,"ngIf"]],template:function(s,a){s&1&&(t(0,"mat-tab-group")(1,"mat-tab",0),n(2,"br")(3,"br"),t(4,"h2"),m(5,"Installation"),i(),t(6,"pre"),n(7,"code",1),i(),n(8,"br"),t(9,"h2"),m(10,"Usage"),i(),t(11,"h4"),m(12,"Structural directives"),i(),t(13,"pre"),n(14,"code",1),i(),n(15,"br"),t(16,"h4"),m(17,"Pipes"),i(),t(18,"pre"),n(19,"code",1),i(),n(20,"br"),t(21,"h4"),m(22,"Pipes with poetry"),i(),t(23,"pre"),n(24,"code",1),i()(),t(25,"mat-tab",2),n(26,"br")(27,"br"),t(28,"h2"),m(29,"Code"),i(),t(30,"h4"),m(31,"Permissions"),i(),t(32,"pre"),n(33,"code",1),i(),t(34,"h4"),m(35,"In action"),i(),t(36,"pre"),n(37,"code",1),i(),t(38,"pre"),n(39,"code",1),i(),n(40,"br"),t(41,"h2"),m(42,"Result"),i(),t(43,"mat-card")(44,"span"),m(45,"This is card is always visible to all users."),i()(),S(46,A,3,0,"mat-card",3)(47,B,3,0,"mat-card",4),x(48,"isPermitted"),i()()),s&2&&(o(7),d("highlight","npm install --save @ngx-security/core @ngx-security/permissions")("language","bash"),o(7),d("highlight",a.isPermittedDirective)("language","html"),o(5),d("highlight",a.isPermittedPipe)("language","html"),o(5),d("highlight",a.isPermittedPipePoetry)("language","html"),o(9),d("highlight",a.permissions)("language","typescript"),o(4),d("highlight",a.firstCard)("language","html"),o(2),d("highlight",a.secondCard)("language","html"),o(7),d("isPermitted","printer:xpc4000:configure"),o(),d("ngIf",C(48,16,"user","nas:timeCapsule:write")))},dependencies:[M,I,D,R,j,E,O,T,F],encapsulation:2,changeDetection:0})}}return e})();export{te as PermissionsComponent};
